{% from "_formhelpers.html" import render_field %}
{% extends "_base.html" %}
{% block body %}
  <h2>Search VoDs</h2>
  <form action="" method="post">
      <div class="input text">
          {{ form.search_form.game.label }} {{ form.search_form.game }} <br>
          {{ form.search_form.runner.label }} {{ form.search_form.runner }} <br>
          {{ form.search_form.commentator.label }} {{ form.search_form.commentator }} <br>
          {{ form.search_form.event.label }} {{ form.search_form.event }} <br>
          {{ form.search_form.search }}
      </div>
  </form>
  <h2>Results</h2>
  <ul class="entries">
  {% for vod_str in vod_strs %}
    <li>{{ vod_str }}</li>
  {% else %}
    <li><em>No VoDs matching your search!</em></li>
  {% endfor %}
  </ul>

  <h2>Add new Rec</h2>
  <form action="" method="post">
      <div class="input text">
          {{ render_field(form.vod_id) }}
          {{ render_field(form.description) }}
          {{ render_field(form.tags) }}
          {{ form.add_user_rec }}
      </div>
  </form>

<script>
    $(function() {
        $("#game_autocomplete").autocomplete({
            source: '{{ url_for("games.root") }}',
            method: "get",
            minLength: 1
        });

        $("#runner_autocomplete").autocomplete({
            source: '{{ url_for("participants.root") }}',
            method: "get",
            minLength: 1
        });

        $("#commentator_autocomplete").autocomplete({
            source: '{{ url_for("participants.root") }}',
            method: "get",
            minLength: 1
        });

        $("#event_autocomplete").autocomplete({
            source: '{{ url_for("events.root") }}',
            method: "get",
            minLength: 1
        });
    });
</script>

{% endblock %}